<main id="content">
    <div class="container">
        <div class="row">
            <div class="sidebar">
                <nav id="sidebar" class="sidebar">
                    <ul class="nav flex-column">
                        <!-- Search Bar -->
                        <li class="nav-item">
                            <form class="form-inline my-2 my-lg-0">
                                <input class="form-control" type="search" id="searchInput" placeholder="Search" aria-label="Search"> 
                                <button id="reverseSortButton" class="btn btn-outline-success my-2 my-sm-0" type="button">Reverse Sort</button>
                            </form>
                        </li>
                        <br/>
                        <!-- List of Cards (Scrollable) -->
                        <li class="nav-item">
                            <div class="overflow-auto" style="max-height: 400px;">
                                <div id="cards" hx-get="/api/v1/htmx/blog/items" hx-trigger="load"></div>
                            </div>
                        </li>
                    </ul>
                </nav>
            </div>
            
            <div id="blog-container" class="main-content">
            </div>
        </div>
    </div>
</main>

<script>
    function loadBlogItems(search) {
        htmx.ajax('GET', `/api/v1/htmx/blog/items?filter=${search}&sort=${window.blogSorted}`, '#cards');
    }

    const searchInput = document.getElementById('searchInput');

    searchInput.addEventListener('input', function () {
        const searchTerm = this.value; 
        loadBlogItems(searchTerm);
    });

    window.blogSorted = "desc"; 

    function reorderBlogs() {
        window.blogSorted  = window.blogSorted === "desc" ? "asc" : "desc";
        loadBlogItems(document.getElementById("searchInput").innerText);
    }

    const reverseSortButton = document.getElementById('reverseSortButton');

    reverseSortButton.addEventListener('click', function(event) {
        reorderBlogs();
    });

</script>